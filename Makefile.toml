# Docs: https://github.com/sagiegurari/cargo-make

env_files = [
    "./dev.env",
]

[config]
default_to_workspace = false

[tasks.clean]
command = "cargo"
args = ["clean"]

[tasks.build]
command = "cargo"
args = ["build"]

[tasks.run]
command = "cargo"
args = ["run"]

[tasks.test]
command = "cargo"
args = ["test"]

[tasks.dbstart]
command = "docker-compose"
args = ["-f", "docker/db.yml", "up", "-d" ]

[tasks.dbstop]
command = "docker-compose"
args = ["-f", "docker/db.yml", "down" ]

[tasks.dbdrop]
script = [
    "docker rm --force docker_mariadb_1",
    "docker volume rm docker_mariadb_data",
]

[tasks.dbup1]
cwd = "./apps/migration"
command = "cargo"
args = ["run", "--", "up", "-n1" ]

[tasks.dbdown1]
cwd = "./apps/migration"
command = "cargo"
args = ["run", "--", "down", "-n1" ]

[tasks.dbtempent]
command = "sea-orm-cli"
args = ["generate", "entity", "--date-time-crate" , "time", "-o", "./apps/core-server/src/entities_new/" ]